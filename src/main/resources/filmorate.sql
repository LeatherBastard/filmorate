--
-- PostgreSQL database dump
--

-- Dumped from database version 15.4
-- Dumped by pg_dump version 15.4

-- Started on 2023-09-18 21:14:42

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

DROP DATABASE IF EXISTS filmorate;
--
-- TOC entry 3390 (class 1262 OID 16398)
-- Name: filmorate; Type: DATABASE; Schema: -; Owner: postgres
--

CREATE DATABASE filmorate WITH TEMPLATE = template0 ENCODING = 'UTF8' LOCALE_PROVIDER = libc LOCALE = 'Russian_Russia.1251';


ALTER DATABASE filmorate OWNER TO postgres;

\connect filmorate

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 214 (class 1259 OID 16399)
-- Name: film_genres; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.film_genres (
    film_id integer NOT NULL,
    genre_id integer NOT NULL
);


ALTER TABLE public.film_genres OWNER TO postgres;

--
-- TOC entry 215 (class 1259 OID 16402)
-- Name: films; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.films (
    film_id integer NOT NULL,
    title character varying(255) NOT NULL,
    description character varying(200),
    release_date date NOT NULL,
    duration integer NOT NULL,
    rating_id integer NOT NULL
);


ALTER TABLE public.films OWNER TO postgres;

--
-- TOC entry 216 (class 1259 OID 16407)
-- Name: films_film_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.films ALTER COLUMN film_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.films_film_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 217 (class 1259 OID 16408)
-- Name: friendship; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.friendship (
    user_id integer NOT NULL,
    friend_id integer NOT NULL,
    status_id integer,
    CONSTRAINT user_not_equal_friend CHECK ((user_id <> friend_id))
);


ALTER TABLE public.friendship OWNER TO postgres;

--
-- TOC entry 218 (class 1259 OID 16412)
-- Name: genres; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.genres (
    genre_id integer NOT NULL,
    name character varying(50) NOT NULL
);


ALTER TABLE public.genres OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 16415)
-- Name: genres_genre_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.genres ALTER COLUMN genre_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.genres_genre_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 220 (class 1259 OID 16416)
-- Name: likes; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.likes (
    film_id integer NOT NULL,
    user_id integer NOT NULL
);


ALTER TABLE public.likes OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 16419)
-- Name: ratings; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.ratings (
    rating_id integer NOT NULL,
    name character varying(10) NOT NULL,
    description character varying(200) NOT NULL
);


ALTER TABLE public.ratings OWNER TO postgres;

--
-- TOC entry 222 (class 1259 OID 16422)
-- Name: ratings_rating_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.ratings ALTER COLUMN rating_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ratings_rating_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 223 (class 1259 OID 16423)
-- Name: statuses; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.statuses (
    status_id integer NOT NULL,
    name character varying(50) NOT NULL
);


ALTER TABLE public.statuses OWNER TO postgres;

--
-- TOC entry 224 (class 1259 OID 16426)
-- Name: statuses_status_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.statuses ALTER COLUMN status_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.statuses_status_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 225 (class 1259 OID 16427)
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    user_id integer NOT NULL,
    email character varying(100),
    login character varying(100),
    name character varying(50),
    birthday date
);


ALTER TABLE public.users OWNER TO postgres;

--
-- TOC entry 226 (class 1259 OID 16430)
-- Name: users_user_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.users ALTER COLUMN user_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.users_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 3372 (class 0 OID 16399)
-- Dependencies: 214
-- Data for Name: film_genres; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.film_genres VALUES (2, 1);
INSERT INTO public.film_genres VALUES (1, 7);
INSERT INTO public.film_genres VALUES (1, 3);
INSERT INTO public.film_genres VALUES (1, 4);


--
-- TOC entry 3373 (class 0 OID 16402)
-- Dependencies: 215
-- Data for Name: films; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.films VALUES (1, 'Prometheus', 'Following clues to the origin of mankind, a team finds a structure on a distant moon, but they soon realize they are not alone.', '2012-05-31', 124, 4);
INSERT INTO public.films VALUES (2, 'Fight Club', 'An insomniac office worker and a devil-may-care soap maker form an underground fight club that evolves into much more.', '2000-01-13', 139, 4);


--
-- TOC entry 3375 (class 0 OID 16408)
-- Dependencies: 217
-- Data for Name: friendship; Type: TABLE DATA; Schema: public; Owner: postgres
--



--
-- TOC entry 3376 (class 0 OID 16412)
-- Dependencies: 218
-- Data for Name: genres; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.genres VALUES (1, 'Drama');
INSERT INTO public.genres VALUES (2, 'Action');
INSERT INTO public.genres VALUES (3, 'Mystery');
INSERT INTO public.genres VALUES (4, 'Sci-Fi');
INSERT INTO public.genres VALUES (5, 'Comedy');
INSERT INTO public.genres VALUES (6, 'Crime');
INSERT INTO public.genres VALUES (7, 'Adventure');


--
-- TOC entry 3378 (class 0 OID 16416)
-- Dependencies: 220
-- Data for Name: likes; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.likes VALUES (1, 1);
INSERT INTO public.likes VALUES (2, 1);


--
-- TOC entry 3379 (class 0 OID 16419)
-- Dependencies: 221
-- Data for Name: ratings; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.ratings VALUES (1, 'G', 'All ages admitted. Nothing that would offend parents for viewing by children.');
INSERT INTO public.ratings VALUES (2, 'PG', 'Some material may not be suitable for children. Parents urged to give "parental guidance". May contain some material parents might not like for their young children.');
INSERT INTO public.ratings VALUES (3, 'PG-13', 'Some material may be inappropriate for children under 13. Parents are urged to be cautious. Some material may be inappropriate for pre-teenagers.');
INSERT INTO public.ratings VALUES (4, 'R', 'Under 17 requires accompanying parent or adult guardian. Contains some adult material. Parents are urged to learn more about the film before taking their young children with them.');
INSERT INTO public.ratings VALUES (5, 'NC-17', 'No one 17 and under admitted. Clearly adult. Children are not admitted.');


--
-- TOC entry 3381 (class 0 OID 16423)
-- Dependencies: 223
-- Data for Name: statuses; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.statuses VALUES (1, 'Not confirmed');
INSERT INTO public.statuses VALUES (2, 'Confirmed');


--
-- TOC entry 3383 (class 0 OID 16427)
-- Dependencies: 225
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.users VALUES (1, 'kostrykinmark@gmail.com', 'Leather_Bastard', 'Mark Kostrykin', '1997-09-02');


--
-- TOC entry 3391 (class 0 OID 0)
-- Dependencies: 216
-- Name: films_film_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.films_film_id_seq', 3, true);


--
-- TOC entry 3392 (class 0 OID 0)
-- Dependencies: 219
-- Name: genres_genre_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.genres_genre_id_seq', 7, true);


--
-- TOC entry 3393 (class 0 OID 0)
-- Dependencies: 222
-- Name: ratings_rating_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.ratings_rating_id_seq', 6, true);


--
-- TOC entry 3394 (class 0 OID 0)
-- Dependencies: 224
-- Name: statuses_status_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.statuses_status_id_seq', 2, true);


--
-- TOC entry 3395 (class 0 OID 0)
-- Dependencies: 226
-- Name: users_user_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.users_user_id_seq', 1, true);


--
-- TOC entry 3207 (class 2606 OID 16432)
-- Name: film_genres film_genres_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.film_genres
    ADD CONSTRAINT film_genres_pkey PRIMARY KEY (film_id, genre_id);


--
-- TOC entry 3209 (class 2606 OID 16434)
-- Name: films films_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.films
    ADD CONSTRAINT films_pkey PRIMARY KEY (film_id);


--
-- TOC entry 3211 (class 2606 OID 16436)
-- Name: friendship friendship_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.friendship
    ADD CONSTRAINT friendship_pkey PRIMARY KEY (user_id, friend_id);


--
-- TOC entry 3213 (class 2606 OID 16438)
-- Name: genres genres_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.genres
    ADD CONSTRAINT genres_pkey PRIMARY KEY (genre_id);


--
-- TOC entry 3215 (class 2606 OID 16440)
-- Name: likes likes_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.likes
    ADD CONSTRAINT likes_pkey PRIMARY KEY (film_id, user_id);


--
-- TOC entry 3217 (class 2606 OID 16442)
-- Name: ratings ratings_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ratings
    ADD CONSTRAINT ratings_pkey PRIMARY KEY (rating_id);


--
-- TOC entry 3219 (class 2606 OID 16444)
-- Name: statuses statuses_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.statuses
    ADD CONSTRAINT statuses_pkey PRIMARY KEY (status_id);


--
-- TOC entry 3221 (class 2606 OID 16446)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (user_id);


--
-- TOC entry 3222 (class 2606 OID 16447)
-- Name: film_genres fk_film; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.film_genres
    ADD CONSTRAINT fk_film FOREIGN KEY (film_id) REFERENCES public.films(film_id);


--
-- TOC entry 3228 (class 2606 OID 16452)
-- Name: likes fk_film; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.likes
    ADD CONSTRAINT fk_film FOREIGN KEY (film_id) REFERENCES public.films(film_id);


--
-- TOC entry 3225 (class 2606 OID 16457)
-- Name: friendship fk_friend; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.friendship
    ADD CONSTRAINT fk_friend FOREIGN KEY (friend_id) REFERENCES public.users(user_id);


--
-- TOC entry 3223 (class 2606 OID 16462)
-- Name: film_genres fk_genre; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.film_genres
    ADD CONSTRAINT fk_genre FOREIGN KEY (genre_id) REFERENCES public.genres(genre_id);


--
-- TOC entry 3224 (class 2606 OID 16467)
-- Name: films fk_rating; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.films
    ADD CONSTRAINT fk_rating FOREIGN KEY (rating_id) REFERENCES public.ratings(rating_id);


--
-- TOC entry 3226 (class 2606 OID 16472)
-- Name: friendship fk_status; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.friendship
    ADD CONSTRAINT fk_status FOREIGN KEY (status_id) REFERENCES public.statuses(status_id);


--
-- TOC entry 3229 (class 2606 OID 16477)
-- Name: likes fk_user; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.likes
    ADD CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES public.users(user_id);


--
-- TOC entry 3227 (class 2606 OID 16482)
-- Name: friendship fk_user; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.friendship
    ADD CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES public.users(user_id);


-- Completed on 2023-09-18 21:14:42

--
-- PostgreSQL database dump complete
--

